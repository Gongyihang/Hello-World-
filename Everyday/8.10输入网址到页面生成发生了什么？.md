#### 输入网址到页面生成发生了什么？  
从输入网址到页面呈现这个过程大致可分为以下这几个部分：  
1. 网络通信
2. 页面渲染  

-> 浏览器解析  
-> 查询缓存  
-> dns查询  
-> 建立TCP/IP链接  
-> 服务器处理请求  
-> 服务器发送响应  
-> 客户端收到页面  
-> 解析HTML  
-> 构建渲染树  
-> 开始显示内容(白屏时间)  
-> 首屏内容加载完成(首屏时间)  
-> 用户可交互(DOMContentLoaded)   
-> 加载完成(load)  

![过程](https://img-blog.csdnimg.cn/20190618105854973.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ0ODcyNDgx,size_16,color_FFFFFF,t_70)  


[地址解析过程]https://www.cnblogs.com/jesse131/p/6215961.html
##### 输入网址-浏览器解析 
当我们在浏览器的地址栏输入网址例如(http://www.baidu.com)，http://代表使用超文本传输协议，www.baidu.com代表服务器地址，baidu.com代表域名。一个完整的URL包括协议、服务器地址(主机)、端口、路径  
##### 负责域名查询与解析的DNS服务  



tcp/ip的并发限制
浏览器对同一域名下并发的tcp连接是有限制的（2-10个不等）

而且在http1.0中往往一个资源下载就需要对应一个tcp/ip请求

所以针对这个瓶颈，又出现了很多的资源优化方案

get和post的区别

get和post虽然本质都是tcp/ip，但两者除了在http层面外，在tcp/ip层面也有区别。

get会产生一个tcp数据包，post两个

具体就是：

get请求时，浏览器会把headers和data一起发送出去，服务器响应200（返回数据），

post请求时，浏览器先发送headers，服务器响应100 continue， 浏览器再发送data，服务器响应200（返回数据）。

再说一点，这里的区别是specification（规范）层面，而不是implementation（对规范的实现）


1. 首先从浏览器接受URL到开启网络请求线程  
##### 多进程的浏览器  
浏览器是多进程的，有一个主控进程，以及每一个tab页面都会新开一个进程。进程可能包括主控进程、插件进程、GPU、tab页。
Browser进程：浏览器的主进程（负责协调、主控），只有一个  
第三方插件进程：每种类型的插件对应一个进程，仅当使用该插件时才创建  
GPU进程：最多一个，用于3D绘制  
浏览器渲染进程（内核）：默认每个Tab页面一个进程，互不影响，控制页面渲染，脚本执行，事件处理等（有时候会优化，如多个空白tab会合并成一个进程）  
##### 多线程的浏览器内核  
每一个tab页面可以看作是浏览器内核进程，然后这个进程是多线程的，它有几大类子线程：  
GUI线程、JS引擎线程、事件触发线程、定时器线程、网络请求线程  

##### 解析URL  
输入URL后，会进行解析（URL的本质就是统一资源定位符）
URL一般包括几大部分：  
protocol，协议头，譬如有http，ftp等  
host，主机域名或IP地址  
port，端口号  
path，目录路径  
query，即查询参数  
fragment，即#后的hash值，一般用来定位到某个位置  

##### 网络请求都是单独的线程  
每次网络请求时都需要开辟单独的线程进行，譬如如果URL解析到http协议，就会新建一个网络线程去处理资源下载  
因此浏览器会根据解析出得协议，开辟一个网络线程，前往请求资源（这里，暂时理解为是浏览器内核开辟的，如有错误，后续修复）  

2. 开启网络线程到发出一个完整的http请求  
这一部分主要内容包括：dns查询，tcp/ip请求构建，五层因特网协议栈  
##### DNS查询得到IP  
如果输入的是域名，需要进行dns解析成IP，大致流程：  
如果浏览器有缓存，直接使用浏览器缓存，否则使用本机缓存，再没有的话就是用host  
如果本地没有，就向dns域名服务器查询（当然，中间可能还会经过路由，也有缓存等），查询到对应的IP  
##### TCP/IP请求  
http的本质就是tcp/ip请求  
需要了解3次握手规则建立连接以及断开连接时的四次挥手  
tcp将http长报文划分为短报文，通过三次握手与服务端建立连接，进行可靠传输  
##### 五层因特网协议栈  
其实就是一个概念： 从客户端发出http请求到服务器接收，中间会经过一系列的流程。

简括就是：

从应用层的发送http请求，到传输层通过三次握手建立tcp/ip连接，再到网络层的ip寻址，再到数据链路层的封装成帧，最后到物理层的利用物理介质传输。

当然，服务端的接收就是反过来的步骤。  
1.应用层(dns,http) DNS解析成IP并发送http请求  
2.传输层(tcp,udp) 建立tcp连接（三次握手）  
3.网络层(IP,ARP) IP寻址  
4.数据链路层(PPP) 封装成帧  
5.物理层(利用物理介质传输比特流) 物理传输（然后传输的时候通过双绞线，电磁波等各种介质）  

