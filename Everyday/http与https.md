HTTP就是一个用文本格式描述报文头并用双换行分隔报文头和内容，在TCP基础上实现的请求-响应模式的双向通信协议。  

应用层  报文    
传输层  报文段  
网络层  数据报  
链路层  帧  
物理层  比特

HTTP 是一种 超文本传输协议(Hypertext Transfer Protocol)  
超文本传输协议可以进行文字分割：超文本（Hypertext）、传输（Transfer）、协议（Protocol）  
首先，文本是一种能够被计算机解析的有意义的二进制数据包，传输图片、音频、视频，甚至点击文字或图片能够进行超链接的跳转，那么文本的语义就被扩大了，这种语义扩大后的文本就被称为超文本(Hypertext)。  
两台计算机之间会形成互联关系进行通信，我们存储的超文本会被解析成为二进制数据包，由传输载体（例如同轴电缆，电话线，光缆）负责把二进制数据包由计算机终端传输到另一个终端的过程。这个过程就叫做传输。  
网络协议就是网络中(包括互联网)传递、管理信息的一些规范。如同人与人之间相互交流是需要遵循一定的规矩一样，计算机之间的相互通信需要共同遵守一定的规则，这些规则就称为网络协议。  
HTTP 是一个在计算机世界里专门在两点之间传输文字、图片、音频、视频等超文本数据的约定和规范。  


HTTP 协议主要由三大部分组成：  
1. 起始行（start line）：描述请求或响应的基本信息；方法、URL 字段和 HTTP 版本字段
2. 头部字段（header）：使用 key-value 形式更详细地说明报文；HTTP 的请求标头分为四种： 通用标头、请求标头、响应标头 和 实体标头  
3. 消息正文（entity）：实际传输的数据，它不一定是纯文本，可以是图片、视频等二进制数据。 

请求方法：  
HTTP 请求方法一般分为 8 种，它们分别是：  
GET 获取资源，GET 方法用来请求访问已被 URI 识别的资源。指定的资源经服务器端解析后返回响应内容。也就是说，如果请求的资源是文本，那就保持原样返回；  
POST 传输实体，虽然 GET 方法也可以传输主体信息，但是便于区分，我们一般不用 GET 传输实体信息，反而使用 POST 传输实体信息  
PUT 传输文件，PUT 方法用来传输文件。就像 FTP 协议的文件上传一样，要求在请求报文的主体中包含文件内容，然后保存到请求 URI 指定的位置。但是，鉴于 HTTP 的 PUT 方法自身不带验证机制，任何人都可以上传文件 , 存在安全性问题，因此一般的 Web 网站不使用该方法。若配合 Web 应用程序的验证机制，或架构设计采用REST（REpresentational State Transfer，表征状态转移）标准的同类 Web 网站，就可能会开放使用 PUT 方法。  
HEAD 获得响应首部，HEAD 方法和 GET 方法一样，只是不返回报文主体部分。用于确认 URI 的有效性及资源更新的日期时间等。  
DELETE 删除文件，DELETE 方法用来删除文件，是与 PUT 相反的方法。DELETE 方法按请求 URI 删除指定的资源。  
OPTIONS 询问支持的方法，OPTIONS 方法用来查询针对请求 URI 指定的资源支持的方法。  
TRACE 追踪路径，TRACE 方法是让 Web 服务器端将之前的请求通信环回给客户端的方法。  
CONNECT 要求用隧道协议连接代理，CONNECT 方法要求在与代理服务器通信时建立隧道，实现用隧道协议进行 TCP 通信。主要使用 SSL（Secure Sockets Layer，安全套接层）和 TLS（Transport Layer Security，传输层安全）协议把通信内容加 密后经网络隧道传输。



HTTP 一般是明文传输，很容易被攻击者窃取重要信息，鉴于此，HTTPS 应运而生。HTTPS 的全称为 （Hyper Text Transfer Protocol over SecureSocket Layer），全称有点长，HTTPS 和 HTTP 有很大的不同在于 HTTPS 是以安全为目标的 HTTP 通道，在 HTTP 的基础上通过传输加密和身份认证保证了传输过程的安全性。HTTPS 在 HTTP 的基础上增加了 SSL 层，也就是说 HTTPS = HTTP + SSL。（这块我们后面也会详谈 HTTPS）。  


Keep-Alive 表示的是 Connection 非持续连接的存活时间，如下Connection: Keep-Alive  
Keep-Alive: timeout=5, max=997Keep-Alive 有两个参数，它们是以逗号分隔的参数列表，每个参数由一个标识符和一个由等号 = 分隔的值组成。timeout：指示空闲连接必须保持打开状态的最短时间（以秒为单位）。max：指示在关闭连接之前可以在此连接上发送的最大请求数。  

HTTP 的优点：  
简单灵活易扩展
HTTP 最重要也是最突出的优点是 简单、灵活、易于扩展。  
HTTP 的缺点：  
无状态  
既然服务器没有记忆能力，它就无法支持需要连续多个步骤的事务操作。每次都得问一遍身份信息，不仅麻烦，而且还增加了不必要的数据传输量。由此出现了 Cookie 技术。  
明文  
HTTP 协议里还有一把优缺点一体的双刃剑，就是明文传输。明文意思就是协议里的报文（准确地说是 header 部分）不使用二进制数据，而是用简单可阅读的文本形式。对比 TCP、UDP 这样的二进制协议，它的优点显而易见，不需要借助任何外部工具，用浏览器、Wireshark 或者 tcpdump 抓包后，直接用肉眼就可以很容易地查看或者修改，为我们的开发调试工作带来极大的便利。当然缺点也是显而易见的，就是不安全，可以被监听和被窥探。因为无法判断通信双方的身份，不能判断报文是否被更改过。  
性能  
HTTP 的性能不算差，但不完全适应现在的互联网，还有很大的提升空间。

https  
就是在HTTP（超文本传输协议）的基础上再加一层TLS（传输层安全性协议）或者SSL（安全套接层），说白了就是为了应付HTTP是明文传输的缺点，容易被中间人窃听或者篡改，导致隐私和信息安全出现问题的解决方案。
所谓对称加密，就是可以看到加密解密同时运用同一个密钥。  
非对称加密加密指的是，加密和解密用的并不是同一把钥匙。  

而HTTPS的加密解密方式结合了对称加密和非对称加密，由于非对称加密的性能低，因此我们用这种方式来对密钥（解开门的钥匙）进行非对称加密，防止被中间人猜出保证密钥不泄露。然后针对报文数据的加解密用的是对称加密。  
加密解密  
对明文的加密，相当于对原来看得懂的内容变成一段看不懂的内容。而揭秘，本质上就是一种逆运算。  
加入对2个二进制数A和B进行异或运算得到结果C，那C和B再异或一次就会得到A。  
所谓对称加密，就是这个意思，可以看到加密解密同时运用同一个密钥B。
问：这个密钥需要让对方知道，如果直接传输就会被截获那不就暴露了吗？  
答： 这时候就需要非对称加密了。   
非对称加密加密指的是，加密和解密用的并不是同一把钥匙。  

而HTTPS的加密解密方式结合了对称加密和非对称加密，由于非对称加密的性能低，因此我们用这种方式来对密钥（解开门的钥匙）进行非对称加密，防止被中间人猜出保证密钥不泄露。然后针对报文数据的加解密用的是对称加密。  
Alice以为此时传过来的密钥是Bob的，没料到是Hacker的，因此Hacker能解开数据报文的私钥，因此顺利地解开数据内容。而中间人会在篡改内容之后用Bob给的密钥加密数据报文，发送给Bob。此时Bob也能解开，但是他意识不到这个数据报文遭到了Hacker篡改。  

![https](https://pic3.zhimg.com/v2-cfd40cec3f9621ff97b5e2df46e01290_r.jpg)


问：可否解释一下数字签名具体是通过什么措施验证公钥来源的   
答：服务端把报文经过Hash处理后生成摘要信息Digest（至于为什么需要Hash处理我们等等再讲），摘要信息使用私钥private-key 加密之后就生成签名，服务器把签名连同报文一起发送给客户端。客户端接收后，把签名提取出来用public-key 解密，如果能正常解密出来Digest2，那么就能确认是对方发。     
问：为啥如果用public-key解密就能证明是对方发的呢？   
答：因为这是private-key是CA提供的，而CA是个权威组织，客户端是相信CA的，通过这种方式证明公钥来源。  

现在已经解决了密钥传输、认证问题，但是在数据完整性上没有保障，虽然Hacker看不懂也解密不了内容，但是可以瞎改阿。那此时Bob看到的可能是很乱的内容，它不确定是Alice发的，还是被Hacker中途篡改的。  

这就需要延续刚才说到数字签名认证问题的第二点了，自public-key成功解开之后，下一步就是检验数据完整性了。客户端把报文Text提取出来做相同的Hash处理，得到摘要信息Digest1，再与之前用public-key成功解密之后的Digest2对比，如果两者相等，就表示内容没有被篡改，否则就是被人改过了。因为文本内容哪怕有一点点改动都会Hash出一个完全不一样的摘要信息出来。所以这个在第一步时，先对报文进行Hash处理是为了后续校验数据完整性问题设计的。ps：注意，这里的Hash指的是单向Hash，只能内容生成Hash，而Hash是不能逆向推出内容的。并且不同的输入几乎不可能产生相同的输出，即便你要特意去找也非常难找到这样的输入（抗碰撞性）。因此Alice只要将明文内容做一个Hash运算得到一个Hash值，并一起加密传递过去给Bob。Hacker即便篡改了内容，Bob解密之后发现拿到的内容以及对应计算出来的Hash值与传递过来的不一致，说明这个包的完整性被破坏了。


1. 对称加密以及非对称加密来解决：保密性
2. 数字签名：认证、不可抵赖
3. 单向Hash算法：完整性  

两种 HTTP 请求方法：GET 和 POST
在客户机和服务器之间进行请求-响应时，两种最常被用到的方法是：GET 和 POST。

GET - 从指定的资源请求数据。
POST - 向指定的资源提交要被处理的数据  

有关 GET 请求的其他一些注释：
GET 请求可被缓存  
GET 请求保留在浏览器历史记录中  
GET 请求可被收藏为书签  
GET 请求不应在处理敏感数据时使用  
GET 请求有长度限制  
GET 请求只应当用于取回数据  

有关 POST 请求的其他一些注释：  
POST 请求不会被缓存  
POST 请求不会保留在浏览器历史记录中  
POST 不能被收藏为书签  
POST 请求对数据长度没有要求  